@use super::bare_page_html;
@(title: Cow<str>, logged_in: Option<(Deets,&[(Cow<str>,i64)]), csrf_token: Cow<str>, content: Content)
@:bare_page_html(title, {
    @if let Some((deets, balances)) = logged_in {
        <p>Welcome, @(deets.discord_user.username)#@(deets.discord_user.discriminator)</p>
        <form action="/logout" method="POST">
            <input type="hidden" name="csrf" value="@csrf_token" />
            <input type="submit" name="submit" value="Logout" />
        </form>
        <ul>
            @for (name, amount) in balances {
                <li>@amount@name</li>
            }
        </ul>
        <a href="/">Home</a> | <a href="/my-transactions">My Transactions</a>
    } @else {
        <form action="/login/discord" method="post">
            <input type="hidden" name="csrf" value="@csrf_token" />
            <p>I don't know who you are. You should <input type="submit" name="submit" value="Login" /></p>
        </form>
    }
    <hr />
    @content
})